def build_cv_evaluation_prompt(context: dict, cv_text: str) -> str:
    position = context["position"]

    required_skills = [s for s in context["skills"] if "(wymagana)" in s]
    optional_skills = [s for s in context["skills"] if "(mile widziana)" in s]

    required = ", ".join(required_skills).replace(" (wymagana)", "")
    optional = ", ".join(optional_skills).replace(" (mile widziana)", "")

    return (
        f"ğŸ” RekrutujÄ™ na stanowisko: {position}.\n"
        f"ğŸ” Wymagane umiejÄ™tnoÅ›ci (muszÄ… byÄ‡ obecne w CV dosÅ‚ownie lub jednoznacznie): {required}\n"
        f"ğŸŒ¿ Mile widziane (nieobowiÄ…zkowe): {optional if optional else 'brak'}\n\n"
        f"ğŸ“„ TreÅ›Ä‡ CV:\n"
        f"{cv_text}\n\n"
        f"ğŸ§  Zasady oceny:\n"
        f"1. JeÅ›li chociaÅ¼ **jedna z wymaganych umiejÄ™tnoÅ›ci** nie wystÄ™puje **dosÅ‚ownie** lub **jednoznacznie** w CV, odpowiedÅº musi brzmieÄ‡ âŒ NIE.\n"
        f"2. Nie zgaduj, nie interpretuj. *Brak = brak*. JeÅ›li w CV nie pojawia siÄ™ konkretne sÅ‚owo (np. â€biznesâ€, â€Excelâ€, â€analiza statycznaâ€) lub jego oczywisty odpowiednik, uznaj, Å¼e tej kompetencji nie ma.\n"
        f"3. Nie oceniaj po stanowisku â€“ tylko po treÅ›ci i sÅ‚owach z CV.\n\n"
        f"ğŸ“‹ Odpowiedz w tym formacie:\n"
        f"1. âœ… TAK / âŒ NIE\n"
        f"2. Uzasadnij w maksymalnie 5 zdaniach\n"
        f"3. Wypisz wykryte wymagane umiejÄ™tnoÅ›ci (z listy)\n"
        f"4. Wypisz brakujÄ…ce wymagane umiejÄ™tnoÅ›ci (z listy)\n"
        f"5. WymieÅ„ mocne strony (jeÅ›li sÄ…)\n"
        f"6. WymieÅ„ sÅ‚abe strony (jeÅ›li sÄ…)\n"
        f"7. Zaproponuj pytanie na rozmowÄ™ kwalifikacyjnÄ…"
    )